# 過渡期なデータ
非同期バッチの改修にあたり、過渡期のデータでエラーを出さないようにする実装方法を記載する。

## システムの全体像
「メインシステム」(以降メインと呼称) と「サブシステム」(以降サブと呼称) が存在しており、メインからサブへ連携ファイル(CSV)を送ることで、サブへ指示をしている。

### 処理の流れ
1. メインから連携ファイルが作成される。
2. ジョブでファイル監視が常駐しており、(1)でputされたファイルを検知する。
3. 非同期バッチの連携受付処理がジョブから呼び出され、キューテーブルに登録される。
4. 別に常駐している非同期バッチメイン処理が、一定間隔でキューテーブルを確認し、キューに応じた機能を呼び出す。
5. 非同期バッチメイン処理がサブの各テーブルへ連携データを登録する。

メインシステムが連携ファイルをput --> ファイル監視 --> 非同期バッチ連携受付 --> キューテーブル --> 常駐している非同期バッチ --> 非同期バッチメイン処理 --> サブシステムへ連携データの登録

